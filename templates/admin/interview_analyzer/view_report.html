{% extends 'layouts/admin/dashboard/base.html' %}
{% block page_title %} Smart Interview Assessment {% endblock %}
{% block page_body_title %}
  <!-- Create a container for the button and title -->
<div class="title-container">
  <div class="header">
    <h4 style="visibility: hidden;">Report | Smart Interview Assessment</h4>
    <a href="#menu-toggle" class="added-css added-css1 btn btn-secondary float-right" id="menu-toggle" style="background: #373742"><i class="fa fa-arrow-circle-left icon fa-lg" aria-hidden="true"></i> Insights</a>
  </div>
  <div id="wrapper">

    <!-- Sidebar -->
    <div id="sidebar-wrapper">

      <button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium css-vnbyu8" id="menu-toggle-out" tabindex="0" type="button" aria-label="Toggle Insights"><svg width="18" height="16" viewBox="0 0 18 16" fill="none"><path d="M10 4L10 7L-3.93402e-07 7L-3.0598e-07 9L10 9L10 12L14 8L10 4ZM16 16L18 16L18 -7.86805e-07L16 -6.99382e-07L16 16Z" fill="#EA1B3D"></path></svg><span class="MuiTouchRipple-root css-w0pj6f"></span></button>
      <script>

    $("#menu-toggle-out").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");

      if ($("#wrapper").hasClass("toggled")) {
        $(".container").css("margin-left", "10px");
        $(".container").css("width", "60%");
        $(".added-css").css("margin-right", "39.6%");
         $(".added-css").css("transition", "margin-right 0.5s ease-in-out, transform 0.5s ease-in-out");
          $(".added-css1").css("display", "none");
        $(".icon").addClass("fa-arrow-circle-right");

        var element = document.querySelector('.added-css');

        if (element) {
  element.innerHTML = '<i class="fa fa-arrow-circle-right icon fa-lg" aria-hidden="true"></i> Outsights';
}
      } else {
        $(".container").css("margin-left", "");
        $(".added-css").css("margin-right", "");
        $(".container").css("width", "");
        $(".added-css1").css("display", "");
        $(".icon").removeClass("fa-arrow-circle-right");
        var element = document.querySelector('.added-css');
        if (element) {
  element.innerHTML = '<i class="fa fa-arrow-circle-left icon fa-lg" aria-hidden="true"></i> Insights';
}
      }
    });

    </script>
    <span>
      <div class="css-5277k6 "><span class="MuiButton-startIcon MuiButton-iconSizeMedium css-1l6c7y9"><div class="MuiBox-root css-1l29ab3"><svg viewBox="0 0 12 12" fill="none"  style="width: 14px; height: 14px;"><path d="M1.2 3.6H1.37143C2.03143 3.6 2.57143 4.14 2.57143 4.8V10.8C2.57143 11.46 2.03143 12 1.37143 12H1.2C0.54 12 0 11.46 0 10.8V4.8C0 4.14 0.54 3.6 1.2 3.6ZM6 0C6.66 0 7.2 0.54 7.2 1.2V10.8C7.2 11.46 6.66 12 6 12C5.34 12 4.8 11.46 4.8 10.8V1.2C4.8 0.54 5.34 0 6 0ZM10.8 6.85714C11.46 6.85714 12 7.39714 12 8.05714V10.8C12 11.46 11.46 12 10.8 12C10.14 12 9.6 11.46 9.6 10.8V8.05714C9.6 7.39714 10.14 6.85714 10.8 6.85714Z" fill="#fff"></path></svg></div></span><span class="space-icon" style="padding:1%;color:#fff;font-weight: 500;font-size: 20px;">Analytics</span><span class="MuiTouchRipple-root css-w0pj6f"></span></div>
    </span>

<div class="tabs">
  <div class="tab-2">
    <label for="tab2-1">Interviewer</label>
    <input id="tab2-1" name="tabs-two" type="radio" checked="checked">
    <div>
      <div class="card-body">
          <div class="col-md mb-4 mb-md-0">
            <div class="accordion mt-3" id="question_answer_accordion">
              <div class="card accordion-item-sidebar">
              <h3 class="accordion-header" id="">Total Time Duration: {{interviewer_total_time}}</h3>
            </div>
            </div>

             {% if analysis_data %}
                         {% for key,words in analysis_data %}
                             {% if key == 'Interviewer Analysis' %}
            <div class="accordion mt-3" id="question_answer_accordion">
             <div class="card accordion-item-sidebar">
                <h2 class="accordion-header" id="heading_{{ index }}">

                  <button type="button" class="accordion-button" data-bs-toggle="collapse"
                    data-bs-target="#accordion1" aria-expanded="false" aria-controls="accordion1">
                    <i class="fa fa-history" aria-hidden="true" style="color: #aa142d"></i>&nbsp;
                      Weak Words <span class="badge btn-danger words_rounded" style="float:right;"> {{ words['weak_words'] | count }}</span>
                  </button>
                </h2>
                <div id="accordion1" class="accordion-collapse collapse show add-extra-css"
                  data-bs-parent="#question_answer_accordion" aria-labelledby="heading_{{ index }}">
                  <div class="accordion-body">
                    {% for weak in words['weak_words'] %}
                                <span class="badge btn-danger words_rounded" style="font-size:14px;text-transform: none;line-height:1; border-radius: 20px !important;background-color: #676775;color: #fff;"><span style="background-color: #fff;border-radius: 50%;padding: 2px 10px;height: 5px;color:#373742;">{{ weak['count'] }}</span> {{ weak['word'] }}</span>
                            {% endfor %}

                    </div>
                  </div>
              </div>
            </div>


              <div class="accordion mt-3" id="question_answer_accordion">
             <div class="card accordion-item-sidebar">
                <h2 class="accordion-header" id="heading_{{ index }}">

                  <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse"
                    data-bs-target="#accordion2" aria-expanded="false" aria-controls="accordion2">
                    <i class="fa fa-map-signs" aria-hidden="true" style="color: #aa142d"></i>&nbsp;
                      Filler Words  <span class="badge btn-danger words_rounded" style="float:right;">{{ words['filler_words'] | count }}</span>
                  </button>
                </h2>
            <div id="accordion2" class="accordion-collapse collapse add-extra-css"
              data-bs-parent="#question_answer_accordion" aria-labelledby="heading_{{ index }}">
              <div class="accordion-body">

                 {% for filler in words['filler_words'] %}
                            <span class="badge btn-danger words_rounded" style="font-size:14px;text-transform: none;line-height:1; border-radius: 20px !important;background-color: #676775;color: #fff;"><span style="background-color: #fff;border-radius: 50%;padding: 2px 10px;height: 5px;color:#373742;">{{ filler['count'] }}</span> {{ filler['word'] }}</span>
                        {% endfor %}
              </div>
            </div>
        </div>

      </div>
             {% endif %}
            {% endfor %}
 {% endif %}
    </div>
      </div>
    </div>
  </div>
  <div class="tab-2">
    <label for="tab2-2">Candidate</label>
    <input id="tab2-2" name="tabs-two" type="radio">
    <div>
      <div class="card-body">
          <div class="col-md mb-4 mb-md-0">
             {% if analysis_data %}
                         {% for key,words in analysis_data %}
                            {% if key == 'Candidate Analysis' %}
            <div class="accordion mt-3" id="question_answer_accordion">
              <div class="card accordion-item-sidebar">
                <h3 class="accordion-header" id="">Total Time Duration: {{candidate_total_time}}</h3>
              </div>
            </div>
            <div class="accordion mt-3" id="question_answer_accordion">
              <div class="card accordion-item-sidebar">
                  <h2 class="accordion-header" id="heading_{{ index }}">

                    <button type="button" class="accordion-button" data-bs-toggle="collapse"
                      data-bs-target="#accordion3" aria-expanded="false" aria-controls="accordion3">
                      <i class="fa fa-history" aria-hidden="true" style="color: #aa142d"></i>&nbsp;
                        Weak Words <span class="badge btn-danger words_rounded" style="float: right;"> {{ words['weak_words'] | count }}</span>
                    </button>
                  </h2>
                <div id="accordion3" class="accordion-collapse collapse show add-extra-css"
                  data-bs-parent="#question_answer_accordion" aria-labelledby="heading_{{ index }}">
                  <div class="accordion-body">
                  {% for weak in words['weak_words'] %}
                              <span class="badge btn-danger words_rounded" style="font-size:14px;text-transform: none;line-height:1; border-radius: 20px !important;background-color: #676775;color: #fff;"><span style="background-color: #fff;border-radius: 50%;padding: 2px 10px;height: 5px;color:#373742;">{{ weak['count'] }}</span> {{ weak['word'] }}</span>
                          {% endfor %}
                  </div>
                </div>
              </div>

            </div>


              <div class="accordion mt-3" id="question_answer_accordion">
             <div class="card accordion-item-sidebar">
                <h2 class="accordion-header" id="heading_{{ index }}">

                  <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse"
                    data-bs-target="#accordion4" aria-expanded="false" aria-controls="accordion4">
                    <i class="fa fa-map-signs" aria-hidden="true" style="color: #aa142d"></i>&nbsp;
                    Filler Words <span class="badge btn-danger words_rounded" style="float:right;">{{ words['filler_words'] | count }}</span>
                  </button>
                </h2>
            <div id="accordion4" class="accordion-collapse collapse add-extra-css"
              data-bs-parent="#question_answer_accordion" aria-labelledby="heading_{{ index }}">
              <div class="accordion-body">
                 {% for filler in words['filler_words'] %}
                            <span class="badge btn-danger words_rounded" style="font-size:14px;text-transform: none;line-height:1; border-radius: 20px !important;background-color: #676775;color: #fff;"><span style="background-color: #fff;border-radius: 50%;padding: 2px 10px;height: 5px;color:#373742;">{{ filler['count'] }}</span> {{ filler['word'] }}</span>
                        {% endfor %}
              </div>
            </div>
        </div>

      </div>
            {% endif %}
            {% endfor %}

 {% endif %}
          </div>
      </div>
    </div>


    </div>
    <!-- /#sidebar-wrapper -->
  </div>

<script src="{{ url_for('static', filename='assets/js/jquery-3.6.0.min.js') }}" ></script>
<script>
  $(document).ready(function() {
    $("#menu-toggle").click(function(e) {
      e.preventDefault();
      $("#wrapper").toggleClass("toggled");

      if ($("#wrapper").hasClass("toggled")) {
        $(".container").css("margin-left", "10px");
        $(".container").css("width", "60%");
        $(".added-css").css("margin-right", "39.6%");
        $(".added-css1").css("display", "none");
         $(".added-css").css("transition", "margin-right 0.5s ease-in-out, transform 0.5s ease-in-out");
        $(".icon").addClass("fa-arrow-circle-right");
        var element = document.querySelector('.added-css');
        if (element) {
  element.innerHTML = '<i class="fa fa-arrow-circle-right icon fa-lg" aria-hidden="true"></i> Outsights';
}
      } else {
        $(".container").css("margin-left", "");
        $(".added-css").css("margin-right", "");
        $(".container").css("width", "");
        $(".icon").removeClass("fa-arrow-circle-right");
        var element = document.querySelector('.added-css');
        $(".added-css1").css("display", "");
        if (element) {
  element.innerHTML = '<i class="fa fa-arrow-circle-left icon fa-lg" aria-hidden="true"></i> Insights';
}
      }
    });
  });

  const accordion = document.getElementsByClassName("content-container");

for (let i = 0; i < accordion.length; i++) {
  accordion[i].addEventListener("click", function () {
    this.classList.toggle("active");
    console.log(this);
  });
}

</script>
  </div>
{% endblock %}
{% block head_styles %}

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

<link href="{{ url_for('static', filename='assets/css/details_report.css') }}" rel="stylesheet" />

    <script src="{{ url_for('static', filename='assets/js/query.slim.min.js') }}" ></script>
<script src="{{ url_for('static', filename='assets/js/chart.js') }}"></script>
<script src="{{ url_for('static', filename='admin/assets/js/single-report.js') }}"></script>

{% endblock %} {% block body_block %}
<div class="container">
  <div class="row mb-4">
    <div class="report_header">
      <h2 class="m-4 text-center">
        <u>Interview Report of {{ candidate.name }}</u>
      </h2>
      <!-- <a class="download_report" href="#"><button class="file-upload-button css-1ikvom0">
          <i class="fa fa-download"></i> Download Report
        </button></a> -->
    </div>

    <!--start-->

     <section class="content">
      <div class="container-fluid overall_insight_container">
        <h5 class="mb-2">OverAll Insights</h5>
        <div class="row overall_insight_row">
          <div class="col-md-3 col-sm-12 col-xs-12">
            <div class="info-box">
              <span class="info-box-icon bg-info"><i class="fa fa-question-circle" style="color:#fff"></i></span>

              <div class="info-box-content">
                <span class="info-box-text">Total Questions</span>
                <span class="info-box-number">{{overall_questions_count}}</span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->
          <div class="col-md-3 col-sm-12 col-xs-12">
            <div class="info-box">
              <span class="info-box-icon bg-success"><i class="fa fa-text-height" style="color:#fff"></i></span>

              <div class="info-box-content">
                <span class="info-box-text">Total Technical Questions</span>
                <span class="info-box-number">{{technical_question_count}}</span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->
          <div class="col-md-3 col-sm-12 col-xs-12">
            <div class="info-box">
              <span class="info-box-icon bg-warning"><i class="fa fa-commenting" style="color:#fff"></i></span>

              <div class="info-box-content">
                <span class="info-box-text"> Technical Discussion (In Min) </span>
                <span class="info-box-number">{{ interview_total_tech_time }} </span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->
          <div class="col-md-3 col-sm-12 col-xs-12">
            <div class="info-box">
              <span class="info-box-icon bg-danger"><i class="fa fa-eercast" style="color:#fff"></i></span>

              <div class="info-box-content">
                <span class="info-box-text">OverAll Discussion (In Min)</span>
                <span class="info-box-number">{{overall_discussion}}</span>
              </div>
              <!-- /.info-box-content -->
            </div>
            <!-- /.info-box -->
          </div>
          <!-- /.col -->
        </div>
      </div>

        <!-- /.row -->
     </section>
    <!--end-->

    <div class="col-md-6 stretch-card grid-margin">
      <div class="report-container">
        <h3 class="report-title">Interviewer's Score</h3>
        <i class="fa fa-info-circle icon-css" aria-hidden="true" title="Interviewer Overall Graph Report " data-bs-toggle="modal"
          data-bs-target="#graphmodal" data-video-report="{{candidate.overall_interviewer_video_report}}"
          data-text-report="{{candidate.overall_interviewer_text_report}}"
          data-audio-report="{{candidate.overall_interviewer_audio_report}}"></i>
      </div>
      <div class="card bg-gradient-success card-img-holder text-white">
        <i class="fa fa-info-circle icon-css" aria-hidden="true" title="Check Confidence Calculation Formula" data-bs-toggle="modal"
          data-bs-target="#confidenceLevel" style="position: absolute; top: 0; right: 0; margin: 10px;z-index:999"></i>
        <div class="card-body">

          <img src="{{ url_for('static', filename='assets/images/dashboard/circle.svg') }}" class="card-img-absolute"
            alt="circle-image" />

          <!-- Overall Interviewer Video Confidence -->
          {% set OIVC = overall.overall_interviewer_confidence['CL'] %}
          <!-- Overall Interviewer Text Confidence -->
          {% set OITC = overall.overall_interviewer_confidence_text['CL'] %}
          <!-- Overall Interviewer Audio Confidence -->
          {% set OIAC = overall.overall_interviewer_confidence_audio['CL'] %}

          <p class="font-weight-normal mb-3 box-p-tag">
            Confidence Level (CL) - <small>{{ ((OIVC + OITC) / 2) | round(2) }}%</small>
            <i class="mdi mdi-diamond mdi-24px float-right"></i>
          </p>
          <p class="percentage-font">
            <span>Video Analysis:
              {{OIVC|round(2)}}%</span>
            <span>Text Analysis:
              {{OITC|round(2)}}%</span>
            <span>Audio Analysis:
                {{OIAC|round(2)}}%</span>
          </p>
        </div>
      </div>
    </div>
    <div class="col-md-6 stretch-card grid-margin">
      <div class="report-container">
        <h3 class="report-title">Candidate's Score</h3>
        <i class="fa fa-info-circle icon-css" aria-hidden="true" title="Candidate Overall Graph Report " data-bs-toggle="modal"
          data-bs-target="#graphmodal" data-video-report="{{candidate.overall_candidate_video_report}}"
          data-text-report="{{candidate.overall_candidate_text_report}}"
          data-audio-report="{{candidate.overall_candidate_audio_report}}"></i>
      </div>
      <div class="card bg-gradient-success card-img-holder text-white">
        <div class="card-body">
          <img src="{{ url_for('static', filename='assets/images/dashboard/circle.svg') }}" class="card-img-absolute"
            alt="circle-image" />

          <!-- Overall Candidate Video Confidence -->
          {% set OCVC = overall.overall_candidate_confidence['CL'] %}
          <!-- Overall Candidate Text Confidence -->
          {% set OCTC = overall.overall_candidate_confidence_text['CL'] %}

          {% set OCAC = overall.overall_candidate_confidence_audio['CL'] %}
          <p class="font-weight-normal mb-3 box-p-tag">
            Confidence Level (CL) - <small>{{ ((OCVC + OCTC) / 2) | round(2) }}%</small>
            <i class="mdi mdi-diamond mdi-24px float-right"></i>
          </p>
          <p class="percentage-font">
            <span>Video Analysis:
              {{OCVC|round(2)}}%</span>
            <span>Text Analysis:
              {{OCTC|round(2)}}%</span>
            <span>Audio Analysis:
                {{OCAC|round(2)}}%</span>
          </p>
        </div>
      </div>
    </div>

  </div>
  <div class="row">
    <div class="col-xl-12">
      <div class="card">
        <div class="card-header">
          <h4> Conversation Analysis</h4>
        </div>
        <div class="card-body">
          <div class="col-md mb-4 mb-md-0">
            <div class="accordion mt-3" id="question_answer_accordion">
              {% set list_length = report_data|length %}
              {% for video_report,
              video_process in report_data %}
              {% set index = loop.index %}
              {% if index <= list_length %} {% if index==list_length %} {% set
                next_video_process=report_data[index-1][1] %} {% else %} {% set next_video_process=report_data[index][1]
                %} {% endif %} {% if (next_video_process.start_duration|int - 3) <=video_process.end_duration|int
                <=(next_video_process.start_duration|int + 3) and video_process.speaker=='interviewer' %} <div
                class="card accordion-item">
                <h2 class="accordion-header" id="heading_{{ index }}">
                  <button type="button" class="accordion-button collapsed" data-bs-toggle="collapse"
                    data-bs-target="#accordion_{{ index }}" aria-expanded="false" aria-controls="accordion_{{ index }}">
                    <i class="fa fa-commenting" aria-hidden="true" style="color: #aa142d"></i>&nbsp;
                    {% if video_process.interview_transcript=='NA' %}
                        Transcript Not Found
                    {% else %}
                    {{video_process.interview_transcript|weak_word_identify|safe}}
                     {{video_process.interview_transcript|identify_technical_question|safe}}
                    {% endif %}
                  </button>
                </h2>

                <div class="percentage-wrapper">
                  <div class="interviewer">
                    <p style="display:flex;flex-direction: column;">
                    <i class="fa fa-info-circle icon-css" aria-hidden="true" title="Interviewer Graph Report " data-bs-toggle="modal"
                      data-bs-target="#graphmodal" data-video-report="{{video_report.frame_dur_report}}"
                      data-text-report="{{video_report.text_dur_report}}"
                      data-audio-report="{{video_report.audio_report}}"></i>
                      <br>
                      <i class="fa fa-video-camera show-video-clip-interviewer" style="
                    color: #b90015;font-size: 15px; cursor: pointer;" aria-hidden="true" time="{{ video_process.start_duration|seconds_to_minutes }} - {{ video_process.end_duration|seconds_to_minutes }}" title="Interviewer Timestamp (Minutes:Seconds) : {{ video_process.start_duration|seconds_to_minutes }} - {{ video_process.end_duration|seconds_to_minutes }}" data-bs-toggle="modal"
                    data-bs-target="#vclipmodel-int" data-video-clip="{{video_report.video_process_id|get_timestamp_vclip_url }}"></i></p>

                    {% if video_report.frame_dur_report|emotion_scores|int >= 50 %}
                      {% set colorval_frame_dur_report = '#10982c' %}
                    {% elif video_report.frame_dur_report|emotion_scores|int > 33 and video_report.frame_dur_report|emotion_scores|int < 50 %}
                      {% set colorval_frame_dur_report = '#d3a655' %}
                    {% elif video_report.frame_dur_report|emotion_scores|int < 33 %}
                      {% set colorval_frame_dur_report = '#b90015' %}
                    {% endif %}

                    {% if video_report.text_dur_report|emotion_scores|int >= 50 %}
                      {% set colorval_text_dur_report = '#10982c' %}
                    {% elif video_report.text_dur_report|emotion_scores|int > 33 and video_report.text_dur_report|emotion_scores|int < 50 %}
                      {% set colorval_text_dur_report = '#d3a655' %}
                    {% elif video_report.text_dur_report|emotion_scores|int < 33 %}
                      {% set colorval_text_dur_report = '#b90015' %}
                    {% endif %}

                    {% if video_report.audio_report|emotion_scores_audio|float >= 50 %}
                      {% set colorval_audio_report = '#10982c' %}
                    {% elif video_report.audio_report|emotion_scores_audio|float > 33 and video_report.audio_report|emotion_scores_audio|float < 50 %}
                      {% set colorval_audio_report = '#d3a655' %}
                    {% elif video_report.audio_report|emotion_scores_audio|float < 33 %}
                      {% set colorval_audio_report = '#b90015' %}
                    {% endif %}

                    <span>
                      Interviewer's Score(Video) = <span style="color:{{colorval_frame_dur_report}};">{{video_report.frame_dur_report|emotion_scores|float }}%</span>
                      <br />
                      Interviewer's Score(Text) = <span style="color:{{colorval_text_dur_report}};">{{video_report.text_dur_report|emotion_scores|float }}%</span>
                    <br/>

                      Interviewer's Score(Audio) = <span style="color:{{colorval_audio_report}};">{{video_report.audio_report|emotion_scores_audio|float }}%</span>
                    </span>

                  </div>

                  <!-- <div> -->
                    <!-- <span><i class="fa fa-video-camera show-video-clip-interviewer" style="
                    color: #b90015;font-size: 15px;" aria-hidden="true" title="Interviewer Timestamp clip (Minutes:Seconds): {{ video_process.start_duration|seconds_to_minutes }}-{{ video_process.end_duration|seconds_to_minutes }}" data-bs-toggle="modal"
                    data-bs-target="#vclipmodel-int" data-video-clip="{{video_report.video_process_id|get_timestamp_vclip_url }}"></i></span>
                    <br> -->

                  {% elif ((next_video_process.start_duration|int - 3) <= video_process.end_duration|int
                    <=((next_video_process.start_duration|int) + 3) and video_process.speaker=='candidate' and
                    video_process.start_duration !='0' ) %}
                    <!-- <span><i class="fa fa-video-camera show-video-clip-candidate" style="
                      color: #10982c; font-size: 15px;" aria-hidden="true" title="Candidate Timestamp clip (Minutes:Seconds): {{ video_process.start_duration|seconds_to_minutes }}-{{ video_process.end_duration|seconds_to_minutes }}" data-bs-toggle="modal"
                    data-bs-target="#vclipmodel-cand" data-video-clip="{{video_report.video_process_id|get_timestamp_vclip_url }}"></i></span> --><!-- </div> -->
                    <div class="candidate">
                      <p style="display:flex;flex-direction: column;">
                    <i class="fa fa-info-circle icon-css" aria-hidden="true" title="Candidate Graph Report" data-bs-toggle="modal"
                      data-bs-target="#graphmodal" data-video-report="{{video_report.frame_dur_report}}"
                      data-text-report="{{video_report.text_dur_report}}"
                      data-audio-report="{{video_report.audio_report}}"></i>
                      <br>
                      <i class="fa fa-video-camera show-video-clip-candidate " style="
                      color: #10982c; font-size: 15px; cursor: pointer;" aria-hidden="true" time="{{ video_process.start_duration|seconds_to_minutes }} - {{ video_process.end_duration|seconds_to_minutes }}" title="Candidate Timestamp  (Minutes:Seconds) : {{ video_process.start_duration|seconds_to_minutes }} - {{ video_process.end_duration|seconds_to_minutes }}" data-bs-toggle="modal"
                    data-bs-target="#vclipmodel-cand" data-video-clip="{{video_report.video_process_id|get_timestamp_vclip_url }}"></i></p>

                    {% if video_report.frame_dur_report|emotion_scores|int >= 50 %}
                      {% set colorval_frame_dur_report = '#10982c' %}
                    {% elif video_report.frame_dur_report|emotion_scores|int > 33 and video_report.frame_dur_report|emotion_scores|int < 50 %}
                      {% set colorval_frame_dur_report = '#d3a655' %}
                    {% elif video_report.frame_dur_report|emotion_scores|int < 33 %}
                      {% set colorval_frame_dur_report = '#b90015' %}
                    {% endif %}

                    {% if video_report.text_dur_report|emotion_scores|int >= 50 %}
                      {% set colorval_text_dur_report = '#10982c' %}
                    {% elif video_report.text_dur_report|emotion_scores|int > 33 and video_report.text_dur_report|emotion_scores|int < 50 %}
                      {% set colorval_text_dur_report = '#d3a655' %}
                    {% elif video_report.text_dur_report|emotion_scores|int < 33 %}
                      {% set colorval_text_dur_report = '#b90015' %}
                    {% endif %}

                    {% if video_report.audio_report|emotion_scores_audio|int >= 50 %}
                      {% set colorval_audio_report = '#10982c' %}
                    {% elif video_report.audio_report|emotion_scores_audio|int > 33 and video_report.audio_report|emotion_scores_audio|int < 50 %}
                      {% set colorval_audio_report = '#d3a655' %}
                    {% elif video_report.audio_report|emotion_scores_audio|int < 33 %}
                      {% set colorval_audio_report = '#b90015' %}
                    {% endif %}

                    <span>
                      Candidate's Score(Video) = <span style="color:{{colorval_frame_dur_report}};">{{video_report.frame_dur_report|emotion_scores|float }}%</span>
                      <br />
                      Candidate's Score(Text) = <span style="color:{{colorval_text_dur_report}};">{{video_report.text_dur_report|emotion_scores|float }}%</span>
                      <br />
                      Candidate's Score(Audio) = <span style="color:{{colorval_audio_report}};">{{video_report.audio_report|emotion_scores_audio|float }}%</span>
                    </span>




                </div>
            </div>

            <div id="accordion_{{ index - 1 }}" class="accordion-collapse collapse"
              data-bs-parent="#question_answer_accordion" aria-labelledby="heading_{{ index }}">
              <div class="accordion-body">
                <i class="fa fa-commenting" aria-hidden="true" style="color: #228b22"></i>&nbsp;
                {% if video_process.interview_transcript=='NA' %}
                  Transcript Not Found
                {% else %}
                  {{video_process.interview_transcript|weak_word_identify|safe}}
                {% endif %}

              </div>
            </div>

            {% elif index == list_length and video_process.speaker ==
            'candidate' %}

            <div class="candidate">
              <p style="display:flex;flex-direction: column;">
              <i class="fa fa-info-circle icon-css" aria-hidden="true" title="Candidate Graph Report" data-bs-toggle="modal"
                data-bs-target="#graphmodal" data-video-report="{{video_report.frame_dur_report}}"
                data-text-report="{{video_report.text_dur_report}}"
                data-audio-report="{{video_report.audio_report}}"></i>
                <br>
                <i class="fa fa-video-camera show-video-clip-candidate" style="
              color: #10982c; font-size: 15px;cursor: pointer;" aria-hidden="true" time="{{ video_process.start_duration|seconds_to_minutes }} - {{ video_process.end_duration|seconds_to_minutes }}"  title="Candidate Timestamp (Minutes:Seconds) : {{ video_process.start_duration|seconds_to_minutes }} - {{ video_process.end_duration|seconds_to_minutes }}" data-bs-toggle="modal"
            data-bs-target="#vclipmodel-cand" data-video-clip="{{video_report.video_process_id|get_timestamp_vclip_url }}"></i></p>

                {% if video_report.frame_dur_report|emotion_scores|int >= 50 %}
                      {% set colorval_frame_dur_report = '#10982c' %}
                    {% elif video_report.frame_dur_report|emotion_scores|int > 33 and video_report.frame_dur_report|emotion_scores|int < 50 %}
                      {% set colorval_frame_dur_report = '#d3a655' %}
                    {% elif video_report.frame_dur_report|emotion_scores|int < 33 %}
                      {% set colorval_frame_dur_report = '#b90015' %}
                    {% endif %}

                    {% if video_report.text_dur_report|emotion_scores|int >= 50 %}
                      {% set colorval_text_dur_report = '#10982c' %}
                    {% elif video_report.text_dur_report|emotion_scores|int > 33 and video_report.text_dur_report|emotion_scores|int < 50 %}
                      {% set colorval_text_dur_report = '#d3a655' %}
                    {% elif video_report.text_dur_report|emotion_scores|int < 33 %}
                      {% set colorval_text_dur_report = '#b90015' %}
                    {% endif %}

                    {% if video_report.audio_report|emotion_scores_audio|int >= 50 %}
                      {% set colorval_audio_report = '#10982c' %}
                    {% elif video_report.audio_report|emotion_scores_audio|int > 33 and video_report.audio_report|emotion_scores_audio|int < 50 %}
                      {% set colorval_audio_report = '#d3a655' %}
                    {% elif video_report.audio_report|emotion_scores_audio|int < 33 %}
                      {% set colorval_audio_report = '#b90015' %}
                    {% endif %}

                <span>
                Candidate's Score1(Video) = <span style="color:{{colorval_frame_dur_report}};">{{video_report.frame_dur_report|emotion_scores }}</span>
                <br />
                Candidate's Score(Text) =  <span style="color:{{colorval_text_dur_report}};">{{video_report.text_dur_report|emotion_scores }}</span>
                <br />

                Candidate's Score(Audio)1 = <span style="color:{{colorval_audio_report}};">{{video_report.audio_report|emotion_scores_audio }}</span>
              </span>

            </div>
          </div>
          <div id="accordion_{{ index - 1 }}" class="accordion-collapse collapse"
            data-bs-parent="#question_answer_accordion">
            <div class="accordion-body">
              <i class="fa fa-commenting" aria-hidden="true" style="color: #228b22"></i>&nbsp;
                {% if video_process.interview_transcript=='NA' %}
                  Transcript Not Found
                {% else %}
                {{video_process.interview_transcript|weak_word_identify|safe}}
                {% endif %}
            </div>
          </div>
          {%elif video_process.speaker == 'interviewer'%}
          <div id="accordion_{{ index - 1 }}" class="accordion-collapse collapse"
            data-bs-parent="#question_answer_accordion">
            <div class="accordion-body">
              <i class="fa fa-commenting" aria-hidden="true" style="color: #228b22"></i>&nbsp;
              {% if video_process.interview_transcript=='NA' %}
              Transcript Not Found
            {% else %}
             {{video_process.interview_transcript|weak_word_identify|safe}}
            {% endif %}
            </div>
          </div>

          {% endif %} {% if video_process.speaker == 'candidate' %}
        </div>
        {% endif %} {% endif %} {% endfor %}
      </div>
    </div>
  </div>
</div>
</div>
</div>

<!-- The Modal -->
<div class="modal" id="graphmodal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <span class="heading" id="graph-h2-head">
        Graph Report</span>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="chart-wrapper video_report_wrapper">
          <canvas id="video_report_canvas"></canvas>
          <div id="chart-text">Video Analysis</div>
        </div>
        <div class="chart-wrapper text_report_wrapper">
          <canvas id="text_report_canvas"></canvas>
          <div id="chart-text">Text Analysis</div>
        </div>
        <!-- <div class="chart-wrapper">
            <canvas id="audio_report_canvas"></canvas>
            <div id="chart-text">Center Text</div>
          </div> -->
      </div>
    </div>
  </div>
</div>

<div class="modal" id="vclipmodel-int">
  <div class="modal-dialog">
    <div class="modal-content" style="width: 73%;margin: 0 auto;">
      <div class="modal-header">
        <span class="heading" id="itime">Interviewer Timestamp </span>
        <button type="button" class="btn-close" id="closeModalButton-interviewer" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div id="videoContainer-interviewer"></div>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="vclipmodel-cand">
  <div class="modal-dialog">
    <div class="modal-content"style="width: 73%;margin: 0 auto;">
      <div class="modal-header">
        <span class="heading" id="ctime">Candidate Timestamp </span>
        <button type="button" class="btn-close" id="closeModalButton-candidate" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div id="videoContainer-candidate"></div>

      </div>
    </div>
  </div>
</div>
<!-- The Modal -->
<div class="modal" id="confidenceLevel">
  <div class="modal-dialog">
    <div class="modal-content">

      <div class="modal-header">
        <span class="heading">
          Confidence Level</span>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
<!--        <span>
      <div class="css-5277k6" style="flex-direction: row;
    -webkit-box-align: center;
    align-items: center;
    -webkit-box-pack: center;
    justify-content: center;
    padding-top: 16px;
    padding-bottom: 16px;
    background: linear-gradient( 71.49deg, rgb(55, 55, 66) -9.87%, rgb(103, 103, 117) 79.01% );
    color: rgb(4, 3, 72);
    padding: 2%;margin-top:-6%"><span style="padding:1%;color:#fff;font-weight: 500;font-size: 20px;">Logic Used to calculate Confidence Level</span></div>
    </span> -->
      <div class="modal-body">
        <div>



          <p>Considering below weight values</p>
          <ul>
            <li>Weight Neutral = 0.7,</li>
            <li>Weight Happy = 0.2, </li>
            <li>Weight Surprise = 0.05, </li>
            <li>Weight Angry = 0.6, </li>
            <li>Weight Fear = 0.7,</li>
            <li>Weight Sad = 1, </li>
            <li>Weight Disgust = 1 </li>
          </ul>
          <p>We used the following formula to calculate the weighted sum </p>
          <p style="font-weight: bolder;
    border-style: inset;
    padding: 1%;">Weighted Sum = (Neutral * Weight Neutral) + (Happy * Weight Happy) + (Surprise * Weight Surprise) </br></br>
            Other Emotions Sum = (Angry * Weight Angry) + (Disgust * Weight Disgust) + (Fear * Weight Fear) + (Sad * Weight Sad)</br></br>
            Confidence Score = Weighted Sum</br></br>
            Nervousness Score = Other Emotions Sum </br></br>
    
    Total Score = Confidence Score + Nervousness Score</p>

           <p style="font-weight: bolder;
    border-style: inset;
    padding: 1%;"> Confidence Level  = (Confidence Score / Total Score) * 100</p>
          <p>
            The Confidence Level represents the cumulative emotional intensity of the selected emotions. It is equal to
            the weighted sum of the selected emotion's percentages.
          </p>
        </div>

        <!-- <div class="chart-wrapper">
            <canvas id="audio_report_canvas"></canvas>
            <div id="chart-text">Center Text</div>
          </div> -->
      </div>
    </div>
  </div>
</div>


<div class="modal" id="nervousnessLevel">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>

      <div class="modal-body">
        <div>
          <h2>Logic Used to calculate Nervousness Level</h2>
          <p>weight_neutral = 0.7, weight_happy = 0.2, weight_surprise = 0.05, weight_angry = 0.6, weight_fear = 0.7,
            weight_sad = 1, weight_disgust = 1</p>

          <p>Formula for Sum of Remaining Emotions: other_emotions_sum = (angry * weight_angry) + (disgust *
            weight_disgust) + (fear * weight_fear) + (sad * weight_sad)</p>

          <p>The Nervousness Level represents the cumulative emotional intensity of the remaining emotions. It is equal
            to the sum of the remaining emotions' weighted percentages.
          </p>
          <p><b>Formula for Nervousness Level: nervousness_level = other_emotions_sum</b></p>
        </div>

        <!-- <div class="chart-wrapper">
            <canvas id="audio_report_canvas"></canvas>
            <div id="chart-text">Center Text</div>
          </div> -->
      </div>
    </div>
  </div>
</div>


{% endblock %}
<script src="{{ url_for('static', filename='assets/js/jquery.js') }}" ></script>
<script src="{{ url_for('static', filename='assets/js/bootstrap.js') }}" ></script>